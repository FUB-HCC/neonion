<div ng-controller="AnnotationListCtrl" ng-cloak>
    <div ng-repeat="(concept, annotationByConceptType) in annotations | filterByConceptAnnotation | filter:filterConceptAnnotations | orderBy: 'rdf.typeof' | groupBy: 'rdf.typeof'">
        <div class="concept-annotation-header">
            <h3>{{ concept }}</h3>
            <a class="button button-small" target="blank"
               ng-click="downloadConceptTags(annotationByConceptType, 'csv')">
                <span class="fa fa-download fa-fw"></span>Download
            </a>
        </div>

        <ul class="annotation-grid">
            <li ng-repeat="(key, annotationByConcept) in annotationByConceptType | orderBy: 'rdf.label' | groupBy: 'rdf.uri'">
                <div>
                    <div class="ann-header">
                        {{ (annotationByConcept | first).rdf.label }}
                    </div>
                    <div>
                        <a href="/annotation_occurrences#?rdf.uri={{ key | escape }}&oa.annotatedBy.email={{ user.email }}">
                            {{ annotationByConcept.length }} Occurrences
                        </a>
                    </div>
                    <div>
                        <a href="/annotation_documents#?rdf.uri={{ key | escape }}&oa.annotatedBy.email={{ user.email }}">
                            {{ (annotationByConcept | unique : 'uri').length }} Documents
                        </a>
                    </div>
                    <div class="sub-info">
                        {{ (annotationByConcept | last).created | date : "MM/dd/yyyy 'at' h:mma" }}
                    </div>
                </div>
            </li>
        </ul>
    </div>
</div>